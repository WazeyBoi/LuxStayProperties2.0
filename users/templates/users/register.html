{% extends "users/base.html" %}

{% block title %}Register | LuxStay Properties{% endblock %}

{% block content %}
<div class="form-container">
    <h2>Register</h2>
    <form method="post">
        {% csrf_token %}
        
        <!-- Display non-field errors, if any -->
        {{ form.non_field_errors }}

        <label for="username">Username:</label>
        {{ form.username }}
        <!-- Display errors specific to the username field -->
        {% for error in form.username.errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}

        <label for="password1">Password:</label>
        <div style="position: relative;">
            {{ form.password1 }}
            <span id="toggle-password1" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer;">
                üëÅÔ∏è
            </span>
        </div>

        <label for="password2">Password confirmation:</label>
        <div style="position: relative;">
            {{ form.password2 }}
            <span id="toggle-password2" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer;">
                üëÅÔ∏è
            </span>
        </div>

        <!-- Display errors specific to the password fields -->
        {% for error in form.password1.errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}
        {% for error in form.password2.errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}

        <label for="first_name">First name:</label>
        {{ form.first_name }}
        {% for error in form.first_name.errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}

        <label for="last_name">Last name:</label>
        {{ form.last_name }}
        {% for error in form.last_name.errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}

        <label for="email">Email address:</label>
        {{ form.email }}
        {% for error in form.email.errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}

        <label for="contact">Contact:</label>
        {{ form.contact }}
        {% for error in form.contact.errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}

        <label for="birthdate">Birthdate:</label>
        {{ form.birthdate }}
        {% for error in form.birthdate.errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}

        <label for="address">Address:</label>
        {{ form.address }}
        {% for error in form.address.errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}

        <label for="province">Province:</label>
        {{ form.province }}
        {% for error in form.province.errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}

        <label for="city">City:</label>
        {{ form.city }}
        {% for error in form.city.errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}

        <label for="zipcode">Zipcode:</label>
        {{ form.zipcode }}
        {% for error in form.zipcode.errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}

        <button type="submit">Register</button>
    </form>

    <p>
        Already have an account? <a href="{% url 'login' %}">Login here</a>
    </p>
</div>

<script>
    const togglePassword1 = document.getElementById('toggle-password1');
    const passwordField1 = document.getElementById('id_password1');

    const togglePassword2 = document.getElementById('toggle-password2');
    const passwordField2 = document.getElementById('id_password2');

    togglePassword1.addEventListener('click', function () {
        const type = passwordField1.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordField1.setAttribute('type', type);
        this.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è';
    });

    togglePassword2.addEventListener('click', function () {
        const type = passwordField2.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordField2.setAttribute('type', type);
        this.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è';
    });
</script>

{% endblock %}
